{"version":3,"sources":["../../../../assets/NewScript/assets/NewScript/Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/NewScript","sourcesContent":["import { Action, audioEngine } from '../../creator';\n// Learn TypeScript:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n    @property (cc.AudioClip)\n    jumpAudio:cc.AudioClip = null;\n    // 主角跳跃高度\n    private jumpHeight:number = 200;\n    // 主角跳跃持续时间\n    private jumpDuration:number = 0.3;\n    // 最大移动速度\n    private maxMoveSpeed:number = 400;\n    // 加速度\n    private accel:number = 350;\n    // 定义动作\n    private jumpAction:Action = null;\n    // 是否添加向左的加速度\n    private accLeft:boolean = false;\n    // 是否添加向右的加速度\n    private accRight:boolean = false;\n    // 主角当前水平方向速度\n    private xSpeed:number = 0;\n    start () {\n        // 初始化跳跃动作\n        this.jumpAction = this.setJumpAction();\n        // runAction 执行并返回该执行的动作\n        this.node.runAction(this.jumpAction);\n\n        // 初始化键盘输入监听\n        this.setInputControl();\n    }\n    // 主角的原地弹跳动作\n    setJumpAction () {\n        // 跳跃上升\n        // cc.moveBy 第一个参数 运行时间，第二个参数，x坐标y坐标移动的距离，easing参数， 动画的过度方式\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\n        // 下落\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\n        // 添加一个回调函数用于在动作结束时调用我们定义的其他方法\n        var callback = cc.callFunc(this.playJumpSound, this)        \n        // 不断重复\n        // repeatForever 永远的重复一个动作，此动作不能被添加到cc.sequence或cc.spawn中\n        // sequence 按照添加的动作依次执行\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\n    }\n    playJumpSound(){\n        // 调用声音引擎播放声音\n        cc.audioEngine.playEffect(this.jumpAudio, false)\n    }\n    update (dt) {\n        // 根据当前加速度方向每帧更新速度\n        if(this.accLeft){\n            this.xSpeed -= this.accel * dt;\n        } else if (this.accRight) {\n            this.xSpeed += this.accel * dt;\n        } \n        // 限制主角的速度不能超过最大值\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed){\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\n        }\n        // 根据当前速度更新主角位置\n        this.node.x += this.xSpeed * dt;\n    }\n    setInputControl () {\n        var self = this;\n        // 添加键盘事件监听\n        // 有按键按下时，判断是否是我们制定的防线控制键，并设置向对应方向加速\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function(event){\n            switch(event.keyCode){\n                case cc.KEY.a:\n                    self.accLeft = true;\n                    break;\n                case cc.KEY.d:\n                    self.accRight = true;\n                    break;\n            }\n        });\n        // 松开按键时，停止该方向的加速\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function(event){\n            switch(event.keyCode) {\n                case cc.KEY.a: \n                    self.accLeft = false;\n                    break;\n                case cc.KEY.d:\n                    self.accRight = false;\n                    break;\n            }\n        })\n    }\n}\n"]}